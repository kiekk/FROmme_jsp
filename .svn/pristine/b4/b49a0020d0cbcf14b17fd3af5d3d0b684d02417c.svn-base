<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

	<% 
		//테스트용 세션아이디
		session.setAttribute("session_id", "test1");
	%>

<!DOCTYPE html>
<html lang="ko-KR">
<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<head>
    <title>FROmme - 내 손으로 만드는 특별한 순간</title>
</head>

<%@ include file="src_forInclude.html"%>
<link rel="stylesheet" href="${pageContext.request.contextPath}/app/classes/css/class-style.css">
<link rel="stylesheet" href="${pageContext.request.contextPath}/app/classes/css/payment-style.css">


<%-- JSTL --%>
<c:set var="cartList" value="${requestScope.cartList}" />
<c:set var="userBean" value="${requestScope.user_bean}" />
<c:set var="totalPrice" value="${requestScope.total_price}" />


<body class="size-1140">

	<!-- HEADER -->
	<header role="banner" class="position-absolute">
		<%@ include file="../main/header.jsp"%>
	</header>

    <section>
        <div class="margin-bottom-70 "></div>
        <hr>
        
        <div class="line">
            <div class="margin">
				<div class="page-title">
					<div class="text-center">
						<div style="margin: 140px 70px;">
							<h1>결제 정보</h1>
						</div>
					</div>
				</div>
                <!-- delivery info Form -->
                <form name="orderForm" class="customform" method="post" action="">
                    <div class="s-12 m-12 l-6 padding ">
                        <div class="parchase-box">

                            <h2 class="margin-bottom-30">주문 배송 정보</h2>
							<div class="line margin-bottom-20">
								<div class="margin">
									<div class="l-12 margin-bottom-10">
										<p class="h6">주문자</p>
									</div>


									<div class="s-12 m-12 l-6">
										<input name="orderer-name" class="required name"
											value="${userBean.getUsers_name() }" placeholder="이름"
											title="이름" type="text">
										<p class="email-error form-error ">이름을 입력해주세요.</p>
									</div>
									<div class="s-12 m-12 l-6">
										<input name="orderer-phone" class="phone" placeholder="연락처"
											value="${userBean.getUsers_phone() }" title="연락처" type="text">
										<p class="name-error form-error">연락처를 입력해주세요.</p>
									</div>
									<div class="l-12">
										<input name="email" class="email" placeholder="email"
											value="${userBean.getUsers_email() }" title="이메일"
											type="email">
									</div>


								</div>
							</div>
							
							<div class="line margin-bottom-20">
                                <div class="margin">
                                <c:if test="${userBean != null}">
								<div class="l-6">
									<input id="purchase" type="button"
										class="s-12 button button-dark-stroke text-dark text-white-hover text-size-16"
										value="기본 배송지" style="font-family: GmarketSansMedium;">
								</div>
								<div class="l-6">
									<input id="purchase" type="button"
										class="s-12 button button-dark-stroke text-dark text-white-hover text-size-16"
										value="신규 배송지" style="font-family: GmarketSansMedium;" onclick="newDeliv();">
								</div>
							</c:if>
							
                                    <div class="s-12">
                                        <div class="l-6 margin-bottom-10">
                                            <p class="h6">배송지 정보</p>
                                        </div>
                                        <label class="l-6">
                                            <input type="checkbox" id="deliv_info_check">
                                            <span class="text-size-12">주문자 정보와 동일</span>
                                        </label>
                                    </div>
                                    
                            
                                    <div class="s-12 m-12 l-6">
                                        <input name="deliv-name" class="required name" placeholder="받는 분" title="받는 분"
                                            type="text">
                                    </div>
                                    <div class="s-12 m-12 l-6">
                                        <input name="deliv-phone" class="phone" placeholder="연락처" title="연락처"
                                            type="text">
                                    </div>
                                    <div class="l-9">
                                        <input name="postcode" class="postcode" placeholder="우편번호" title="우편번호"
                                            type="text" readonly>
                                    </div>
                                    <div class="l-3">
                                        <input id="purchase" type="button"
                                            class="s-12 button button-dark-stroke text-dark text-white-hover text-size-16"
                                            value="검색" style="font-family: GmarketSansMedium;">
                                    </div>
                                    <div class="l-12">
                                        <input name="address" class="address" placeholder="주소" title="주소" type=" text"
                                            readonly>
                                    </div>
                                    <div class="l-12">
                                        <input name="address-detail" class="address-detail margin-bottom-0"
                                            placeholder="상세주소" title="상세주소" type="text">
                                    </div>
                                    <div class="s-12">

                                        <div class="custom-select">
                                            <select class="form-control margin-bottom-0" name="deliv_memo"
                                                onchange="$('#order_form_wrap ._custom_deliv_memo_wrap')[$(this).val()=='custom'?'show':'hide']()"
                                                title="memo">
                                                <option value="">없음</option>
                                                <option value="배송 전에 미리 연락 바랍니다.">배송 전에 미리 연락 바랍니다.</option>
                                                <option value="부재시 경비실에 맡겨주세요.">부재시 경비실에 맡겨주세요.</option>
                                                <option value="부재시 전화나 문자를 남겨주세요.">부재시 전화나 문자를 남겨주세요.</option>
                                                <option value="custom">직접입력</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="margin-top-30"></div>
                        <div class="parchase-box">
                            <div class="line margin-bottom-20">
                                <h2 class="margin-bottom-20">결제 수단</h2>
                                <input type="hidden" value="" id="pg_type" name="pg_type">
                                <input type="hidden" value="" id="pg_status" name="pg_status">
                                <div class="l-12">
                                    <input class="" type="radio" name="pay_type" value="account"
                                        onchange="return checkPayType($(this).val())" data-name="계좌이체" checked=""
                                        class="_pay_type">
                                    <span>계좌이체</span>
                                    <input type="radio" name="pay_type" value="cash"
                                        onchange=" return checkPayType($(this).val())" data-name="무통장입금" checked=""
                                        class="_pay_type">
                                    <span>무통장입금</span>
                                </div>
                            </div>
                            <div class="form-select-wrap_cash_idx_wrap on">
                                <select class="form-control  text-padding-small "
                                    style="display:; color: #000;  z-index: 10" name="cash_idx" id="cash_idx"
                                    title="입금계좌 안내">
                                    <!-- <option value="">없음</option> -->
                                    <option value="계좌">신한 110-000-0000 (홍길동)</option>
                                </select>
                            </div>

                            <input type="text" class="form-control text-padding-small margin-bottom-0"
                                id="depositor_name" name="depositor_name" placeholder="입금자명 (미입력시 주문자명)"
                                style="z-index: 10; position: relative;" title="입금자명 (미입력시 주문자명)">
                        </div>

                    </div>



                    <div class="s-12 m-12 l-6 padding">
                        <div class="parchase-box">
							<div class="orderList-wrapper">
								<div class="line">
									<h2 class="margin-bottom-30">주문 상품 정보</h2>

									<c:forEach var="cartList_Bean" items="${cartList}"
										varStatus="status">
										<div class="line">
											<div class="l-3">
												<div class="margin">
													<img
														src="${pageContext.request.contextPath}/app/assets/img/class_thumbnail/candle.jpg"
														style="height: 75px;">
												</div>
												<div class="l-9 ">
													<p class="text-strong">클래스명 :
														${cartList_Bean.getClasses_name() }</p>
													<p>[ 수강일 : 2020.11.03 ]</p>
													<p>
														<span>총 1개 </span>74,000<span>원</span>
													</p>
												</div>
											</div>
										</div>
									</c:forEach>


									<hr>
									<div class="s-12">
										<div class="margin-bottom-20">
											<p class="text-size-12 margin-bottom-10">결제예정금액</p>
											<p class="h2">${totalPrice }
												<span>원</span>
											</p>
										</div>

										<input id="purchase" type="button"
											class="s-12 button background-primary text-white text-size-16 margin-bottom-0"
											value="결제하기" style="font-family: GmarketSansMedium;">
									</div>
								</div>


							</div>
						</div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    
    <div class="margin-top-70"></div>
    
	<!-- FOOTER -->
	<footer>
		<%@ include file="../main/footer.jsp"%>
	</footer>

</body>
<script>var contextPath = "${pageContext.request.contextPath}";</script>
<script>
	//주문자 정보와 동일 체크박스 선택시
	$(document).ready(function() {
		$("#deliv_info_check").click(function() {
			if ( $("#deliv_info_check").prop("checked") ){
				$( "input[name=deliv-name]").attr( "value", $("input[name=orderer-name]").val() );
				$( "input[name=deliv-phone]").attr( "value", $("input[name=orderer-phone]").val() );
			} else {
				//주문자 정보와 동일 체크박스 선택 해제시
				$( "input[name=deliv-name]").attr( "value", "") ;
				$( "input[name=deliv-phone]").attr( "value", "") ;
			}
		})
	})
	



</script>

</html>